{% extends "layout_modern.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <div><h2>Reports - {{ hospital['hospital_name'] }}</h2><small class="text-muted">Patient: {{ session.get('patient_name') }}</small></div>
</div>
<div class="row">
  {% for r in reports %}
  <div class="col-md-4 mb-3">
    <div class="card h-100 text-dark">
      <div class="card-body">
        <div class="d-flex align-items-center mb-2">
          <div class="me-3 icon bg-gradient text-white fw-bold">{{ r['report_type'][0] }}</div>
          <div><h5 class="mb-0">{{ r['report_type'] }}</h5><small class="text-muted">{{ r['uploaded_at'][:10] }}</small></div>
        </div>
        <p class="small">Download or view your report.</p>
      </div>
      <div class="card-footer bg-transparent border-0">
        <a class="btn btn-primary w-100 mb-2" href="{{ url_for('download', filename=r['file_path']) }}">Download</a>
        <a class="btn btn-outline-primary w-100" target="_blank" href="{{ url_for('download', filename=r['file_path']) }}">View</a>
      </div>
    </div>
  </div>
  {% else %}<p class="text-muted">No reports found.</p>{% endfor %}
</div>
{% endblock %}